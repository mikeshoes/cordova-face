<?xml version='1.0' encoding='utf-8'?>
<plugin id="cordova-plugin-face-recognize" version="1.0" xmlns="http://apache.org/cordova/ns/plugins/1.0" xmlns:android="http://schemas.android.com/apk/res/android">
    <name>cordovaFace</name>

    <preference name="FACE_APP_ID"/>
    <preference name="FD_SDK_KEY"/>
    <preference name="FR_SDK_KEY"/>
    <js-module name="cordovaFace" src="www/cordovaFace.js">
        <clobbers target="cordova.plugins.cordovaFace" />
    </js-module>

    <platform name="android">
		<config-file parent="/*" target="res/xml/config.xml">
			<feature name="FaceRecognizePlugin">
				<param name="android-package" value="cordova.plugin.face.recognize.FaceRecognizePlugin" />
			</feature>
			<preference name="face_app_id" value="$FACE_APP_ID" />
		    <preference name="fd_sdk_key" value="$FD_SDK_KEY" />
		    <preference name="fr_sdk_key" value="$FR_SDK_KEY" />
		</config-file>
		<config-file parent="/manifest" target="AndroidManifest.xml">
			<!-- Push service 运行需要的权限 -->
		    <uses-permission android:name="android.permission.CAMERA" />
			 <uses-feature android:name="android.hardware.camera" />
			 <uses-feature android:name="android.hardware.camera.autofocus" />
			<uses-permission android:name="android.permission.WEITE_EXTERNAL_STORAGE"/>
		</config-file>
		<edit-config  target="/manifest/application" file="AndroidManifest.xml" mode="merge"> 
            <application android:networkSecurityConfig="@xml/network_security_config" />
		</edit-config >
		<config-file parent="/manifest/application" target="AndroidManifest.xml"> 
            <activity android:name="cordova.plugin.face.recognize.FacePreviewActivity" android:theme="@android:style/Theme.DeviceDefault.NoActionBar" android:screenOrientation="portrait"/>
		</config-file>
		<source-file src="src/android/FaceRecognizePlugin.java" target-dir="cordova/plugin/face/recognize" />
		<source-file src="src/android/FacePreviewActivity.java" target-dir="cordova/plugin/face/recognize" />
		<source-file src="src/android/HrFaceSdkHelper.java" target-dir="cordova/plugin/face/recognize" />
		<source-file src="src/android/CircleSurfaceView.java" target-dir="cordova/plugin/face/recognize" />
		<source-file src="src/android/CommonUtils.java" target-dir="cordova/plugin/face/recognize" />
		<resource-file  src="src/android/preview.xml" target="res/layout/preview.xml" />
		<resource-file src="src/android/strings.xml" target="res/values/strings.xml" />
		<resource-file src="src/android/network_security_config.xml" target="res/values/network_security_config.xml" />
		<source-file src="src/android/libs/facedetection.jar" target-dir="libs/" />
		<source-file src="src/android/libs/armeabi/libArcSoft_FDEngine.so" target-dir="src/main/jniLibs/armeabi/"/>
		<source-file src="src/android/libs/armeabi/libmpbase.so" target-dir="src/main/jniLibs/armeabi/"/>
		<source-file src="src/android/libs/armeabi-v7a/libArcSoft_FDEngine.so" target-dir="src/main/jniLibs/armeabi-v7a/"/>
		<source-file src="src/android/libs/armeabi-v7a/libmpbase.so" target-dir="src/main/jniLibs/armeabi-v7a/"/>
		<framework src="src/android/dependcy.gradle" custom="true" type="gradleReference"/>
		<framework src="com.android.support:appcompat-v7:24.0.0"/>
	</platform>
</plugin>
